<!DOCTYPE html>
<meta charset="utf-8">
<script src="../lib/d3.v5.min.js"></script>
<style>

rect:hover{
  fill: #c6dbef;
  color: black;

}




text rect {
      font-family: sans-serif;
      font-size: 15px;
      fill: black;
  }

</style>
<body>
<div id="p1"></div>

<script>
var dataset=[{country: 'Bangladesh', population_2012: 105905297, growth: {year_2013:42488 , year_2014:934 , year_2015:52633 , year_2016:112822 , year_2017:160792}},
        {country: 'Ethopia', population_2012: 75656319, growth: {year_2013:1606010 , year_2014:1606705 , year_2015:1600666 , year_2016:1590077 , year_2017:1580805}},
        {country: 'Kenya', population_2012: 33007327, growth: {year_2013:705153 , year_2014:703994 , year_2015:699906 , year_2016:694295 , year_2017:687910}},
        {country: 'Afghanistan', population_2012: 23280573, growth: {year_2013:717151 , year_2014:706082 , year_2015:665025 , year_2016:616262 , year_2017:573643}},
        {country: 'Morocco', population_2012: 13619520, growth: {year_2013:11862 , year_2014:7997 , year_2015:391 , year_2016:-8820 , year_2017:-17029}}]

  function compare(a,b) {
    if (a["population_2012"] > b["population_2012"])
      return -1;
    if (a["population_2012"] < b["population_2012"])
      return 1;
    return 0;
  }

  function range(start, stop, step){
    var a=[start], b=start;
    while(b<stop){b+=(step || 1);a.push(b)}
    return a;
  };

  data = dataset.sort(compare)
  //start of plot
  margin = {top: 100, right: 100, bottom: 100, left: 100}
  width = 1100 - margin.left - margin.right
  height = 500 - margin.top - margin.bottom
  barHeight = 30


  svg = d3.select('#p1')
          .append("svg")


  svgAttr = d3.select("svg")
          .attr("width", width+margin.left+margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

  //create layer groups
  barPlot = svg.append("g")
          .attr("id", 'barPlot')
          .attr("transform", "translate("+margin.left+",0)")

  yLabs = svg.append("g")
          .attr("class", "y axis")



  xScale = d3.scaleLinear()
          .domain([0, d3.max(data, function(d){return d.population_2012})])
          .range([0,width/1.5])

  yScale = d3.scaleBand()
            .domain(data.map(function (d) {
                return d.country}))
            .range([0, height])

  yAxis = d3.axisLeft()
          .scale(yScale)
          .ticks(0)


  bars = d3.select("#barPlot")
          .selectAll('rect')
          .data(data, function(d){return d.population_2012})
          .enter()
          .append("rect")

  barAttributes = bars
          .attr("y", function(d){return yScale(d.country)})
          .attr("height", barHeight)
          .attr("width", function(d){return xScale(d.population_2012)})
          .attr("fill", "#969696")
  yLabs
    .attr("class", 'y axis')
    .call(yAxis)
    .selectAll("text")
    .attr("y", function(d){return yScale(d.country)})
    .attr("fill", "#969696")
    .attr("transform", "translate(" + margin.left + ","+-barHeight/2+ ")")

  yLabs
    .select("path")
    .style("stroke", "none")

  text = d3.select('#barPlot')
          .selectAll("text")
          .data(data, function(d){return d.population_2012})
          .enter()
          .append("text")

  textAttributes = text
          .attr("fill", "white")
          .text(function(d){return d.population_2012})
          .attr("y", function(d){return yScale(d.country)+barHeight/1.5})
          .attr("x", 5)














</script>


</body>
</html>
